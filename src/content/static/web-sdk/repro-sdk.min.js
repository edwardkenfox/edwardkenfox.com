var Repro=function(){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function r(e,t){return e(t={exports:{}},t.exports),t.exports}var o=r(function(e,t){!function(t){if(e.exports=t(),!!0){var r=window.Cookies,o=window.Cookies=t();o.noConflict=function(){return window.Cookies=r,o}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var o in r)t[o]=r[o]}return t}return function t(r){function o(t,n,i){var a;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(i=e({path:"/"},o.defaults,i)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*i.expires),i.expires=s}i.expires=i.expires?i.expires.toUTCString():"";try{a=JSON.stringify(n),/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var l="";for(var d in i)i[d]&&(l+="; "+d,!0!==i[d]&&(l+="="+i[d]));return document.cookie=t+"="+n+l}t||(a={});for(var c=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,p=0;p<c.length;p++){var g=c[p].split("="),m=g.slice(1).join("=");this.json||'"'!==m.charAt(0)||(m=m.slice(1,-1));try{var h=g[0].replace(u,decodeURIComponent);if(m=r.read?r.read(m,h):r(m,h)||m.replace(u,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(e){}if(t===h){a=m;break}t||(a[h]=m)}catch(e){}}return a}}return o.set=o,o.get=function(e){return o.call(o,e)},o.getJSON=function(){return o.apply({json:!0},[].slice.call(arguments))},o.defaults={},o.remove=function(t,r){o(t,"",e(r,{expires:-1}))},o.withConverter=t,o}(function(){})})}),n=r(function(t,r){(function(){var o={function:!0,object:!0},n=o[typeof window]&&window||this,i=o.object&&r,a=o.object&&t&&!t.nodeType&&t,s=i&&a&&"object"==typeof e&&e;!s||s.global!==s&&s.window!==s&&s.self!==s||(n=s);var l=Math.pow(2,53)-1,d=/\bOpera/,c=Object.prototype,u=c.hasOwnProperty,p=c.toString;function g(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function m(e){return e=v(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:g(e)}function h(e,t){for(var r in e)u.call(e,r)&&t(e[r],r,e)}function f(e){return null==e?g(e):p.call(e).slice(8,-1)}function b(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function y(e,t){var r=null;return function(e,t){var r=-1,o=e?e.length:0;if("number"==typeof o&&o>-1&&o<=l)for(;++r<o;)t(e[r],r,e);else h(e,t)}(e,function(o,n){r=t(r,o,n,e)}),r}function v(e){return String(e).replace(/^ +| +$/g,"")}var x=function e(t){var r=n,o=t&&"object"==typeof t&&"String"!=f(t);o&&(r=t,t=null);var i=r.navigator||{},a=i.userAgent||"";t||(t=a);var s,l,c,u,g,x=o?!!i.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(p.toString()),_=o?"Object":"ScriptBridgingProxyObject",k=o?"Object":"Environment",w=o&&r.java?"JavaPackage":f(r.java),S=o?"Object":"RuntimeObject",B=/\bJava/.test(w)&&r.java,C=B&&f(r.environment)==k,E=B?"a":"α",M=B?"b":"β",P=r.document||{},T=r.operamini||r.opera,O=d.test(O=o&&T?T["[[Class]]"]:f(T))?O:T=null,I=t,N=[],U=null,A=t==a,j=A&&T&&"function"==typeof T.version&&T.version(),F=y([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(e,r){return e||RegExp("\\b"+(r.pattern||b(r))+"\\b","i").exec(t)&&(r.label||r)}),D=function(e){return y(e,function(e,r){return e||RegExp("\\b"+(r.pattern||b(r))+"\\b","i").exec(t)&&(r.label||r)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),W=L([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),R=function(e){return y(e,function(e,r,o){return e||(r[W]||r[/^[a-z]+(?: +[a-z]+\b)*/i.exec(W)]||RegExp("\\b"+b(o)+"(?:\\b|\\w*\\d)","i").exec(t))&&o})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),V=function(e){return y(e,function(e,r){var o=r.pattern||b(r);return!e&&(e=RegExp("\\b"+o+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,r){var o={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&r&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(o=o[/[\d.]+$/.exec(e)])&&(e="Windows "+o),e=String(e),t&&r&&(e=e.replace(RegExp(t,"i"),r)),e=m(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,o,r.label||r)),e})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function L(e){return y(e,function(e,r){var o=r.pattern||b(r);return!e&&(e=RegExp("\\b"+o+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+o+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+o+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(r.label&&!RegExp(o,"i").test(r.label)?r.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),r=r.label||r,e=m(e[0].replace(RegExp(o,"i"),r).replace(RegExp("; *(?:"+r+"[_-])?","i")," ").replace(RegExp("("+r+")[-_.]?(\\w)","i"),"$1 $2"))),e})}if(F&&(F=[F]),R&&!W&&(W=L([R])),(s=/\bGoogle TV\b/.exec(W))&&(W=s[0]),/\bSimulator\b/i.test(t)&&(W=(W?W+" ":"")+"Simulator"),"Opera Mini"==D&&/\bOPiOS\b/.test(t)&&N.push("running in Turbo/Uncompressed mode"),"IE"==D&&/\blike iPhone OS\b/.test(t)?(R=(s=e(t.replace(/like iPhone OS/,""))).manufacturer,W=s.product):/^iP/.test(W)?(D||(D="Safari"),V="iOS"+((s=/ OS ([\d_]+)/i.exec(t))?" "+s[1].replace(/_/g,"."):"")):"Konqueror"!=D||/buntu/i.test(V)?R&&"Google"!=R&&(/Chrome/.test(D)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(W))||/\bAndroid\b/.test(V)&&/^Chrome/.test(D)&&/\bVersion\//i.test(t)?(D="Android Browser",V=/\bAndroid\b/.test(V)?V:"Android"):"Silk"==D?(/\bMobi/i.test(t)||(V="Android",N.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&N.unshift("accelerated")):"PaleMoon"==D&&(s=/\bFirefox\/([\d.]+)\b/.exec(t))?N.push("identifying as Firefox "+s[1]):"Firefox"==D&&(s=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(V||(V="Firefox OS"),W||(W=s[1])):!D||(s=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(D))?(D&&!W&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(s+"/")+8))&&(D=null),(s=W||R||V)&&(W||R||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(V))&&(D=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(V)?V:s)+" Browser")):"Electron"==D&&(s=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&N.push("Chromium "+s):V="Kubuntu",j||(j=y(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",b(D),"(?:Firefox|Minefield|NetFront)"],function(e,r){return e||(RegExp(r+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null})),(s=("iCab"==F&&parseFloat(j)>3?"WebKit":/\bOpera\b/.test(D)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(F)&&"WebKit"||!F&&/\bMSIE\b/i.test(t)&&("Mac OS"==V?"Tasman":"Trident")||"WebKit"==F&&/\bPlayStation\b(?! Vita\b)/i.test(D)&&"NetFront")&&(F=[s]),"IE"==D&&(s=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(D+=" Mobile",V="Windows Phone "+(/\+$/.test(s)?s:s+".x"),N.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(D="IE Mobile",V="Windows Phone 8.x",N.unshift("desktop mode"),j||(j=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=D&&"Trident"==F&&(s=/\brv:([\d.]+)/.exec(t))&&(D&&N.push("identifying as "+D+(j?" "+j:"")),D="IE",j=s[1]),A){if(u="global",g=null!=(c=r)?typeof c[u]:"number",/^(?:boolean|number|string|undefined)$/.test(g)||"object"==g&&!c[u])f(s=r.runtime)==_?(D="Adobe AIR",V=s.flash.system.Capabilities.os):f(s=r.phantom)==S?(D="PhantomJS",j=(s=s.version||null)&&s.major+"."+s.minor+"."+s.patch):"number"==typeof P.documentMode&&(s=/\bTrident\/(\d+)/i.exec(t))?(j=[j,P.documentMode],(s=+s[1]+4)!=j[1]&&(N.push("IE "+j[1]+" mode"),F&&(F[1]=""),j[1]=s),j="IE"==D?String(j[1].toFixed(1)):j[0]):"number"==typeof P.documentMode&&/^(?:Chrome|Firefox)\b/.test(D)&&(N.push("masking as "+D+" "+j),D="IE",j="11.0",F=["Trident"],V="Windows");else if(B&&(I=(s=B.lang.System).getProperty("os.arch"),V=V||s.getProperty("os.name")+" "+s.getProperty("os.version")),C){try{j=r.require("ringo/engine").version.join("."),D="RingoJS"}catch(e){(s=r.system)&&s.global.system==r.system&&(D="Narwhal",V||(V=s[0].os||null))}D||(D="Rhino")}else"object"==typeof r.process&&!r.process.browser&&(s=r.process)&&("object"==typeof s.versions&&("string"==typeof s.versions.electron?(N.push("Node "+s.versions.node),D="Electron",j=s.versions.electron):"string"==typeof s.versions.nw&&(N.push("Chromium "+j,"Node "+s.versions.node),D="NW.js",j=s.versions.nw)),D||(D="Node.js",I=s.arch,V=s.platform,j=(j=/[\d.]+/.exec(s.version))?j[0]:null));V=V&&m(V)}if(j&&(s=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(j)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(A&&i.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(U=/b/i.test(s)?"beta":"alpha",j=j.replace(RegExp(s+"\\+?$"),"")+("beta"==U?M:E)+(/\d+\+?/.exec(s)||"")),"Fennec"==D||"Firefox"==D&&/\b(?:Android|Firefox OS)\b/.test(V))D="Firefox Mobile";else if("Maxthon"==D&&j)j=j.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(W))"Xbox 360"==W&&(V=null),"Xbox 360"==W&&/\bIEMobile\b/.test(t)&&N.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(D)&&(!D||W||/Browser|Mobi/.test(D))||"Windows CE"!=V&&!/Mobi/i.test(t))if("IE"==D&&A)try{null===r.external&&N.unshift("platform preview")}catch(e){N.unshift("embedded")}else(/\bBlackBerry\b/.test(W)||/\bBB10\b/.test(t))&&(s=(RegExp(W.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||j)?(V=((s=[s,/BB10/.test(t)])[1]?(W=null,R="BlackBerry"):"Device Software")+" "+s[0],j=null):this!=h&&"Wii"!=W&&(A&&T||/Opera/.test(D)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==D&&/\bOS X (?:\d+\.){2,}/.test(V)||"IE"==D&&(V&&!/^Win/.test(V)&&j>5.5||/\bWindows XP\b/.test(V)&&j>8||8==j&&!/\bTrident\b/.test(t)))&&!d.test(s=e.call(h,t.replace(d,"")+";"))&&s.name&&(s="ing as "+s.name+((s=s.version)?" "+s:""),d.test(D)?(/\bIE\b/.test(s)&&"Mac OS"==V&&(V=null),s="identify"+s):(s="mask"+s,D=O?m(O.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(s)&&(V=null),A||(j=null)),F=["Presto"],N.push(s));else D+=" Mobile";(s=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(s=[parseFloat(s.replace(/\.(\d)$/,".0$1")),s],"Safari"==D&&"+"==s[1].slice(-1)?(D="WebKit Nightly",U="alpha",j=s[1].slice(0,-1)):j!=s[1]&&j!=(s[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(j=null),s[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==s[0]&&537.36==s[2]&&parseFloat(s[1])>=28&&"WebKit"==F&&(F=["Blink"]),A&&(x||s[1])?(F&&(F[1]="like Chrome"),s=s[1]||((s=s[0])<530?1:s<532?2:s<532.05?3:s<533?4:s<534.03?5:s<534.07?6:s<534.1?7:s<534.13?8:s<534.16?9:s<534.24?10:s<534.3?11:s<535.01?12:s<535.02?"13+":s<535.07?15:s<535.11?16:s<535.19?17:s<536.05?18:s<536.1?19:s<537.01?20:s<537.11?"21+":s<537.13?23:s<537.18?24:s<537.24?25:s<537.36?26:"Blink"!=F?"27":"28")):(F&&(F[1]="like Safari"),s=(s=s[0])<400?1:s<500?2:s<526?3:s<533?4:s<534?"4+":s<535?5:s<537?6:s<538?7:s<601?8:"8"),F&&(F[1]+=" "+(s+="number"==typeof s?".x":/[.+]/.test(s)?"":"+")),"Safari"==D&&(!j||parseInt(j)>45)&&(j=s)),"Opera"==D&&(s=/\bzbov|zvav$/.exec(V))?(D+=" ",N.unshift("desktop mode"),"zvav"==s?(D+="Mini",j=null):D+="Mobile",V=V.replace(RegExp(" *"+s+"$"),"")):"Safari"==D&&/\bChrome\b/.exec(F&&F[1])&&(N.unshift("desktop mode"),D="Chrome Mobile",j=null,/\bOS X\b/.test(V)?(R="Apple",V="iOS 4.3+"):V=null),j&&0==j.indexOf(s=/[\d.]+$/.exec(V))&&t.indexOf("/"+s+"-")>-1&&(V=v(V.replace(s,""))),F&&!/\b(?:Avant|Nook)\b/.test(D)&&(/Browser|Lunascape|Maxthon/.test(D)||"Safari"!=D&&/^iOS/.test(V)&&/\bSafari\b/.test(F[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(D)&&F[1])&&(s=F[F.length-1])&&N.push(s),N.length&&(N=["("+N.join("; ")+")"]),R&&W&&W.indexOf(R)<0&&N.push("on "+R),W&&N.push((/^on /.test(N[N.length-1])?"":"on ")+W),V&&(s=/ ([\d.+]+)$/.exec(V),l=s&&"/"==V.charAt(V.length-s[0].length-1),V={architecture:32,family:s&&!l?V.replace(s[0],""):V,version:s?s[1]:null,toString:function(){var e=this.version;return this.family+(e&&!l?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(s=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(I))&&!/\bi686\b/i.test(I)?(V&&(V.architecture=64,V.family=V.family.replace(RegExp(" *"+s),"")),D&&(/\bWOW64\b/i.test(t)||A&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(t))&&N.unshift("32-bit")):V&&/^OS X/.test(V.family)&&"Chrome"==D&&parseFloat(j)>=39&&(V.architecture=64),t||(t=null);var z={};return z.description=t,z.layout=F&&F[0],z.manufacturer=R,z.name=D,z.prerelease=U,z.product=W,z.ua=t,z.version=D&&j,z.os=V||{architecture:null,family:null,version:null,toString:function(){return"null"}},z.parse=e,z.toString=function(){return this.description||""},z.version&&N.unshift(j),z.name&&N.unshift(D),V&&D&&(V!=String(V).split(" ")[0]||V!=D.split(" ")[0]&&!W)&&N.push(W?"("+V+")":"on "+V),N.length&&(z.description=N.join(" ")),z}();i&&a?h(x,function(e,t){i[t]=e}):n.platform=x}).call(e)});var i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},l=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},d=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.getFullYear(),o=e.getMonth()+1,n=e.getDate(),i=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),l=e.getMilliseconds()+"0";return o<10&&(o="0"+o),n<10&&(n="0"+n),i<10&&(i="0"+i),a<10&&(a="0"+a),s<10&&(s="0"+s),t?""+r+o+n+i+a+s+l+" "+function(e){var t=e.getTimezoneOffset()/60,r=t>0?"-":"+",o=Math.abs(t);return o<10&&(o="0"+o),""+r+o+"00"}(e):""+r+o+n+i+a+s+l},u=function(e){return localStorage.getItem(e)},p=function(e,t){try{localStorage.setItem(e,t)}catch(e){if("QuotaExceededError"!==e.name)throw e;console.warn("If you're browsing with private mode, please turn it off for better usability.")}},g=function(e){if(8!==e.length)return e;var t=e.match(/.{2}/g),r="rgba("+t.slice(0,3).map(function(e){return Number("0x"+e)}).join()+","+Number("0x"+t.slice(3))/255+")";return r.includes(NaN)?e:r},m=r(function(e,r){e.exports=function e(r,o,n){function i(s,l){if(!o[s]){if(!r[s]){var d=t;if(!l&&d)return d(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=o[s]={exports:{}};r[s][0].call(u.exports,function(e){var t=r[s][1][e];return i(t||e)},u,u.exports,e,r,o,n)}return o[s].exports}for(var a=t,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){for(var o=[],n=0;n<256;++n)o[n]=(n+256).toString(16).substr(1);t.exports=function(e,t){var r=t||0,n=o;return n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]}},{}],2:[function(e,t,r){var o="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(o){var n=new Uint8Array(16);t.exports=function(){return o(n),n}}else{var i=new Array(16);t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},{}],3:[function(e,t,r){var o,n,i=e("./lib/rng"),a=e("./lib/bytesToUuid"),s=0,l=0;t.exports=function(e,t,r){var d=t&&r||0,c=t||[],u=(e=e||{}).node||o,p=void 0!==e.clockseq?e.clockseq:n;if(null==u||null==p){var g=i();null==u&&(u=o=[1|g[0],g[1],g[2],g[3],g[4],g[5]]),null==p&&(p=n=16383&(g[6]<<8|g[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:l+1,f=m-s+(h-l)/1e4;if(f<0&&void 0===e.clockseq&&(p=p+1&16383),(f<0||m>s)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=m,l=h,n=p;var b=(1e4*(268435455&(m+=122192928e5))+h)%4294967296;c[d++]=b>>>24&255,c[d++]=b>>>16&255,c[d++]=b>>>8&255,c[d++]=255&b;var y=m/4294967296*1e4&268435455;c[d++]=y>>>8&255,c[d++]=255&y,c[d++]=y>>>24&15|16,c[d++]=y>>>16&255,c[d++]=p>>>8|128,c[d++]=255&p;for(var v=0;v<6;++v)c[d+v]=u[v];return t||a(c)}},{"./lib/bytesToUuid":1,"./lib/rng":2}]},{},[3])(3)}),h=function(e){return"rpr_shown_messages:"+e},f=function(){function e(){i(this,e);var t=new Date;this.lastEventTrackedAt&&this.currentSessionstartedAt&&this.currentSessionExpireAt>t||this.updatecurrentSessionStartedAt(t)}return a(e,[{key:"epochToDate",value:function(e){var t=new Date(parseInt(e,10));return isNaN(t.getTime())?null:t}},{key:"isNewSession",value:function(e){return null===this.currentSessionExpireAt||(!!isNaN(this.currentSessionExpireAt.getTime())||this.currentSessionExpireAt<e)}},{key:"updatecurrentSessionStartedAt",value:function(e){o.set("rpr_session_started_at",e.getTime())}},{key:"updateLastEventTrackedAt",value:function(e){o.set("rpr_event_last_tracked_at",e.getTime())}},{key:"currentSessionstartedAt",get:function(){return this.epochToDate(o.get("rpr_session_started_at"))}},{key:"lastEventTrackedAt",get:function(){return this.epochToDate(o.get("rpr_event_last_tracked_at"))}},{key:"currentSessionExpireAt",get:function(){return this.lastEventTrackedAt?new Date(this.lastEventTrackedAt.getTime()+18e5):null}}]),e}(),b=setTimeout;function y(){}function v(e){if(!(this instanceof v))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],S(e,this)}function x(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,v._immediateFn(function(){var r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){var o;try{o=r(e._value)}catch(e){return void k(t.promise,e)}_(t.promise,o)}else(1===e._state?_:k)(t.promise,e._value)})):e._deferreds.push(t)}function _(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if(t instanceof v)return e._state=3,e._value=t,void w(e);if("function"==typeof r)return void S((o=r,n=t,function(){o.apply(n,arguments)}),e)}e._state=1,e._value=t,w(e)}catch(t){k(e,t)}var o,n}function k(e,t){e._state=2,e._value=t,w(e)}function w(e){2===e._state&&0===e._deferreds.length&&v._immediateFn(function(){e._handled||v._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)x(e,e._deferreds[t]);e._deferreds=null}function S(e,t){var r=!1;try{e(function(e){r||(r=!0,_(t,e))},function(e){r||(r=!0,k(t,e))})}catch(e){if(r)return;r=!0,k(t,e)}}v.prototype.catch=function(e){return this.then(null,e)},v.prototype.then=function(e,t){var r=new this.constructor(y);return x(this,new function(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}(e,t,r)),r},v.prototype.finally=function(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})},v.all=function(e){return new v(function(t,r){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);var n=o.length;function i(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){i(e,t)},r)}o[e]=a,0==--n&&t(o)}catch(e){r(e)}}for(var a=0;a<o.length;a++)i(a,o[a])})},v.resolve=function(e){return e&&"object"==typeof e&&e.constructor===v?e:new v(function(t){t(e)})},v.reject=function(e){return new v(function(t,r){r(e)})},v.race=function(e){return new v(function(t,r){for(var o=0,n=e.length;o<n;o++)e[o].then(t,r)})},v._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){b(e,0)},v._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var B=v,C="https://edwardkenfox-api.repro.io/v1/internal/web/config",E=function(){function e(){i(this,e),this.response={},this.appId=null,this.trackable=!0,this.configured=!1,this.ipAddress="",this.messages=[]}return a(e,[{key:"call",value:function(e){var t=this;if(["idfv","token","isFirstLaunch"].some(function(t){return void 0===e[t]}))return B.reject("Aborting configuration API call due to idfv or token or isFirstLaunch missing.");if("onLine"in navigator&&!navigator.onLine)return B.reject("Aborting configuration API call due to browser being offline.");var r=JSON.stringify({user_annotation:e.user_annotation||"",idfv:e.idfv,token:e.token,is_first_launch:e.isFirstLaunch,sdk_version:"0.0.3",os:"web"});return new B(function(e,o){if("fetch"in window)return fetch(C,{method:"POST",headers:{"Content-Type":"application/json"},body:r,mode:"cors"}).then(function(e){if(t.response=e,!t.response.ok)throw new Error(t.response.statusText);return t.response.json()}).then(function(r){return t.appId=r.insight.app_id,t.trackable=r.insight.trackable,t.configured=!0,t.ipAddress=r.insight.ip_address,t.messages=r.web_messages||[],e(t)}).catch(function(e){return 401===t.response.status?(t.trackable=!1,o("Configuration API call failed due to authentication error. Check your repro token.")):o("Configuration API call failed with status "+t.response.status+".")});try{var n=new XMLHttpRequest;return n.onload=function(){if(200===n.status){var r="response"in n?n.response:n.responseText,o=JSON.parse(r);t.appId=o.insight.app_id,t.trackable=o.insight.trackable,t.configured=!0,t.ipAddress=o.insight.ip_address,t.messages=o.messages||[]}else 401===n.status?console.warn("Configuration API call failed due to authentication error. Check your repro token."):console.warn("Configuration API call failed with status "+n.status);return e(t)},n.onerror=function(){return console.warn("Configuration API call failed for an unknown reason."),e(t)},n.ontimeout=function(){return console.warn("Configuration API call timed out."),e(t)},n.open("POST",C,!0),n.setRequestHeader("Content-Type","application/json"),n.withCredentials=!1,n.send(r),e(t)}catch(e){return o(t)}})}},{key:"shouldClearCustomEvents",get:function(){return 200===this.response.status&&!this.trackable}}]),e}(),M=function(){function e(){i(this,e)}return a(e,[{key:"renderFromTemplate",value:function(){throw new Error("You must implement `renderFromTemplate` function!")}},{key:"preloadImage",value:function(){if(!this.imageUrl)return!1;var e=new Image;e.src=this.imageUrl,e.style.display="none",e.style.visibility="hidden",document.body.appendChild(e)}},{key:"show",value:function(){var e=this;if(this.isVisible)return!1;var t=document.createElement("div");t.innerHTML=this.renderFromTemplate(),this.domNode=t,this.isVisible=!0,setTimeout(function(){document.body.appendChild(t)},1e3),this.tracker.clip.trackMessageDisplay(this.messageId,this.messageImpressionTrackId),t.querySelector(this.closeButtonCssSelector).addEventListener("click",function(t){t.preventDefault(),e.dismiss()}),this.primaryButtonText&&t.querySelector(this.primaryButtonCssSelector).addEventListener("click",function(t){t.preventDefault(),e.clickButtonPrimary()}),this.secondaryButtonText&&t.querySelector(this.secondaryButtonCssSelector).addEventListener("click",function(t){t.preventDefault(),e.clickButtonSecondary()}),"Marketing::WebMessageDialogPanel"!==this.type&&"Marketing::DialogImageOnlyWebMessagePanel"!==this.type||t.querySelector("#repro-message--dialog--closer").addEventListener("click",function(){e.dismiss()}),"Marketing::DialogImageOnlyWebMessagePanel"===this.type&&t.querySelector(this.dialogImageOnlyCssSelector).addEventListener("click",function(t){t.preventDefault(),e.clickButtonPrimary()})}},{key:"dismiss",value:function(){this.domNode.querySelector(this.containerCssSelector).style.display="none",this.isVisible=!1,this.manager.hasVisibleMessage=!1,this.tracker.clip.trackMessageDisplay(this.messageId,this.closeButtonId)}},{key:"clickButtonPrimary",value:function(){this.domNode.querySelector(this.containerCssSelector).style.display="none",this.isVisible=!1,this.manager.hasVisibleMessage=!1,this.tracker.clip.trackMessageDisplay(this.messageId,this.primaryButtonId),this.primaryButtonEventName&&this.tracker.track(this.primaryButtonEventName)}},{key:"clickButtonSecondary",value:function(){this.domNode.querySelector(this.containerCssSelector).style.display="none",this.isVisible=!1,this.manager.hasVisibleMessage=!1,this.tracker.clip.trackMessageDisplay(this.messageId,this.secondaryButtonId),this.secondaryButtonEventName&&this.tracker.track(this.secondaryButtonEventName)}},{key:"containerCssSelector",get:function(){throw new Error("You must implement `containerCssSelector` function!")}},{key:"closeButtonCssSelector",get:function(){throw new Error("You must implement `closeButtonCssSelector` function!")}},{key:"primaryButtonCssSelector",get:function(){throw new Error("You must implement `primaryButtonCssSelector` function!")}},{key:"secondaryButtonCssSelector",get:function(){throw new Error("You must implement `secondaryButtonCssSelector` function!")}},{key:"headerStyles",get:function(){return this.headerTextColor?"color:"+g(this.headerTextColor)+";":""}},{key:"bodyStyles",get:function(){return this.bodyTextColor?"color:"+g(this.bodyTextColor)+";":""}},{key:"primaryButtonStyles",get:function(){var e="";return e+=this.primaryButtonColor?"color:"+g(this.primaryButtonColor)+";":"",e+=this.primaryButtonBgColor?"background-color:"+g(this.primaryButtonBgColor)+";":"",e+=this.primaryButtonBorderColor?"border-color:"+g(this.primaryButtonBorderColor)+";":""}},{key:"secondaryButtonStyles",get:function(){var e="";return e+=this.secondaryButtonColor?"color:"+g(this.secondaryButtonColor)+";":"",e+=this.secondaryButtonBgColor?"background-color:"+g(this.secondaryButtonBgColor)+";":"",e+=this.secondaryButtonBorderColor?"border-color:"+g(this.secondaryButtonBorderColor)+";":""}},{key:"closeButtonStyles",get:function(){return this.closeIconColor?"background-color:"+g(this.closeIconColor)+";":""}}]),e}(),P=function(e){function t(e,r,o){i(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.manager=r,n.tracker=o,n.messageId=e.id,n.type=e.type,n.windowBgColor=e.window_bg_color,n.dialogColor=e.dialog_color,n.messageImpressionTrackId=e.message_impression_track_id,n.closeIconColor=e.close_icon_color,n.closeButtonId=e.close_button_id,n.header=e.header,n.headerTextColor=e.header_text_color,n.body=e.body,n.bodyTextColor=e.body_text_color,n.imageUrl=e.image_url,n.primaryButtonText=e.primary_button_text,n.primaryButtonColor=e.primary_button_color,n.primaryButtonBgColor=e.primary_button_bg_color,n.primaryButtonBorderColor=e.primary_button_border_color,n.primaryButtonUrl=e.primary_button_url,n.primaryButtonEventName=e.primary_button_event_name,n.primaryButtonId=e.primary_button_id,n.secondaryButtonText=e.secondary_button_text,n.secondaryButtonColor=e.secondary_button_color,n.secondaryButtonBgColor=e.secondary_button_bg_color,n.secondaryButtonBorderColor=e.secondary_button_border_color,n.secondaryButtonUrl=e.secondary_button_url,n.secondaryButtonEventName=e.secondary_button_event_name,n.secondaryButtonId=e.secondary_button_id,n.position=e.position,n.contentWidth=e.content_width,n.triggerEventName=e.trigger_event_name,n.domNode=null,n.isVisible=!1,n}return l(t,M),a(t,[{key:"renderFromTemplate",value:function(){var e='<div id="repro-message--dialog--overlay-wrapper" style="'+this.overlayStyles+'"><div id="repro-message--dialog--closer"></div><div id="repro-message--dialog--container" style="'+this.dialogStyles+'">';return e+=this.imageUrl?'<div id="repro-message--dialog--image-container" style="background-image:url('+this.imageUrl+')">':'<div id="repro-message--dialog--image-container">',e+='</div><div id="repro-message--dialog--content"><div id="repro-message--dialog--text">',e+=this.header?'<div id="repro-message--dialog--header" style="'+this.headerStyles+'">'+this.header+"</div>":"",e+=this.body?'<div id="repro-message--dialog--body" style="'+this.bodyStyles+'">'+this.body+"</div>":"",e+='<div id="repro-message--dialog--button-container">',e+=this.primaryButtonText?'<div id="repro-message--dialog--primary-button-text" style="'+this.primaryButtonStyles+'">'+this.primaryButtonText+"</div>":"",e+=this.secondaryButtonText?'<div id="repro-message--dialog--secondary-button-text" style="'+this.secondaryButtonStyles+'">'+this.secondaryButtonText+"</div>":"",e+='</div></div></div><div id="repro-message--dialog--close-button"><div id="repro-message--dialog-close-icon"><div id="repro-message--dialog-mdiv" style="'+this.closeButtonStyles+'"><div id="repro-message--dialog-md" style="'+this.closeButtonStyles+'"></div></div></div></div></div>'}},{key:"overlayStyles",get:function(){var e="";return e+=this.windowBgColor?"background-color:"+g(this.windowBgColor)+";":""}},{key:"dialogStyles",get:function(){var e="";return e+=this.dialogColor?"background-color:"+g(this.dialogColor)+";":""}},{key:"containerCssSelector",get:function(){return"#repro-message--dialog--overlay-wrapper"}},{key:"closeButtonCssSelector",get:function(){return"#repro-message--dialog--close-button"}},{key:"primaryButtonCssSelector",get:function(){return"#repro-message--dialog--primary-button-text"}},{key:"secondaryButtonCssSelector",get:function(){return"#repro-message--dialog--secondary-button-text"}}]),t}(),T=function(e){function t(e,r,o){i(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.manager=r,n.tracker=o,n.messageId=e.id,n.type=e.type,n.dialogColor=e.dialog_color,n.messageImpressionTrackId=e.message_impression_track_id,n.closeIconColor=e.close_icon_color,n.closeButtonId=e.close_button_id,n.header=e.header,n.headerTextColor=e.header_text_color,n.body=e.body,n.bodyTextColor=e.body_text_color,n.imageUrl=e.image_url,n.primaryButtonText=e.primary_button_text,n.primaryButtonColor=e.primary_button_color,n.primaryButtonBgColor=e.primary_button_bg_color,n.primaryButtonBorderColor=e.primary_button_border_color,n.primaryButtonUrl=e.primary_button_url,n.primaryButtonEventName=e.primary_button_event_name,n.primaryButtonId=e.primary_button_id,n.secondaryButtonText=e.secondary_button_text,n.secondaryButtonColor=e.secondary_button_color,n.secondaryButtonBgColor=e.secondary_button_bg_color,n.secondaryButtonBorderColor=e.secondary_button_border_color,n.secondaryButtonUrl=e.secondary_button_url,n.secondaryButtonEventName=e.secondary_button_event_name,n.secondaryButtonId=e.secondary_button_id,n.position=e.position,n.contentWidth=e.content_width,n.triggerEventName=e.trigger_event_name,n.domNode=null,n.isVisible=!1,n}return l(t,M),a(t,[{key:"renderFromTemplate",value:function(){var e='<div id="repro-message--dialog-mini--container"  class="'+this.position+'" style="'+this.dialogMiniStyles+'"><div id="repro-message--dialog-mini--content"><div id="repro-message--dialog-mini--upper"><div id="repro-message--dialog-mini--image-container">';return e+=this.imageUrl?'<img id="repro-message--dialog-mini--image" src="'+this.imageUrl+'">':"",e+='</div><div id="repro-message--dialog-mini--text">',e+=this.header?'<div id="repro-message--dialog-mini--header" style="'+this.headerStyles+'">'+this.header+"</div>":"",e+=this.body?'<div id="repro-message--dialog-mini--body" style="'+this.bodyStyles+'">'+this.body+"</div>":"",e+='</div></div><div id="repro-message--dialog-mini--button-container">',e+=this.primaryButtonText?'<div id="repro-message--dialog-mini--primary-button-text" style="'+this.primaryButtonStyles+'">'+this.primaryButtonText+"</div>":"",e+=this.secondaryButtonText?'<div id="repro-message--dialog-mini--secondary-button-text" style="'+this.secondaryButtonStyles+'">'+this.secondaryButtonText+"</div>":"",e+='</div><div id="repro-message--dialog-mini--close-button"><div id="repro-message--dialog-mini-close-icon"><div id="repro-message--dialog-mini-mdiv" style="'+this.closeButtonStyles+'"><div id="repro-message--dialog-mini-md" style="'+this.closeButtonStyles+'"></div></div></div></div></div></div>'}},{key:"dialogMiniStyles",get:function(){var e="";return e+=this.dialogColor?"background-color:"+g(this.dialogColor)+";":""}},{key:"containerCssSelector",get:function(){return"#repro-message--dialog-mini--container"}},{key:"closeButtonCssSelector",get:function(){return"#repro-message--dialog-mini--close-button"}},{key:"primaryButtonCssSelector",get:function(){return"#repro-message--dialog-mini--primary-button-text"}},{key:"secondaryButtonCssSelector",get:function(){return"#repro-message--dialog-mini--secondary-button-text"}}]),t}(),O=function(e){function t(e,r,o){i(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.manager=r,n.tracker=o,n.messageId=e.id,n.type=e.type,n.windowBgColor=e.window_bg_color,n.messageImpressionTrackId=e.message_impression_track_id,n.closeIconColor=e.close_icon_color,n.closeButtonId=e.close_button_id,n.imageUrl=e.image_url,n.primaryButtonUrl=e.primary_button_url,n.primaryButtonEventName=e.primary_button_event_name,n.primaryButtonId=e.primary_button_id,n.contentWidth=e.content_width,n.triggerEventName=e.trigger_event_name,n.domNode=null,n.isVisible=!1,n}return l(t,M),a(t,[{key:"renderFromTemplate",value:function(){var e='<div id="repro-message--dialog--overlay-wrapper" style="'+this.overlayStyles+'"><div id="repro-message--dialog--closer"></div>';return e+=this.primaryButtonUrl?'<a id="repro-message--dialog-image-only--container" href="'+this.primaryButtonUrl+'">':'<div id="repro-message--dialog-image-only--container">',e+='<img id="repro-message--dialog-image-only--image" src="'+this.imageUrl+'"><div id="repro-message--dialog-image-only--close-button"><div id="repro-message--dialog-image-only-close-icon"><div id="repro-message--dialog-image-only-mdiv" style="'+this.closeButtonStyles+'"><div id="repro-message--dialog-image-only-md" style="'+this.closeButtonStyles+'"></div></div></div></div></div>',e+="</div>\n    "}},{key:"overlayStyles",get:function(){var e="";return e+=this.windowBgColor?"background-color:"+g(this.windowBgColor)+";":""}},{key:"containerCssSelector",get:function(){return"#repro-message--dialog--overlay-wrapper"}},{key:"closeButtonCssSelector",get:function(){return"#repro-message--dialog-image-only--close-button"}},{key:"dialogImageOnlyCssSelector",get:function(){return"#repro-message--dialog-image-only--image"}}]),t}(),I=function(e){function t(e,r,o){i(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.manager=r,n.tracker=o,n.messageId=e.id,n.type=e.type,n.bannerColor=e.banner_color,n.messageImpressionTrackId=e.message_impression_track_id,n.closeIconColor=e.close_icon_color,n.closeButtonId=e.close_button_id,n.header=e.header,n.headerTextColor=e.header_text_color,n.body=e.body,n.bodyTextColor=e.body_text_color,n.imageUrl=e.image_url,n.primaryButtonText=e.primary_button_text,n.primaryButtonColor=e.primary_button_color,n.primaryButtonBgColor=e.primary_button_bg_color,n.primaryButtonBorderColor=e.primary_button_border_color,n.primaryButtonUrl=e.primary_button_url,n.primaryButtonEventName=e.primary_button_event_name,n.primaryButtonId=e.primary_button_id,n.secondaryButtonText=e.secondary_button_text,n.secondaryButtonColor=e.secondary_button_color,n.secondaryButtonBgColor=e.secondary_button_bg_color,n.secondaryButtonBorderColor=e.secondary_button_border_color,n.secondaryButtonUrl=e.secondary_button_url,n.secondaryButtonEventName=e.secondary_button_event_name,n.secondaryButtonId=e.secondary_button_id,n.position=e.position,n.contentWidth=e.content_width,n.triggerEventName=e.trigger_event_name,n.domNode=null,n.isVisible=!1,n}return l(t,M),a(t,[{key:"renderFromTemplate",value:function(){var e='<div id="repro-message--banner--container" style="'+this.bannerStyle+'"><div id="repro-message--banner--content"><div id="repro-message--banner--upper"><div id="repro-message--banner--image-container">';return e+=this.imageUrl?'<img id="repro-message---banner--image" src="'+this.imageUrl+'">':"",e+='</div><div id="repro-message--banner--text">',e+=this.header?'<div id="repro-message--banner--header" style="'+this.headerStyles+'">'+this.header+"</div>":"",e+=this.body?'<div id="repro-message--banner--body" style="'+this.bodyStyles+'">'+this.body+"</div>":"",e+='</div></div><div id="repro-message--banner--button-container">',e+=this.primaryButtonText?'<div id="repro-message--banner--primary-button-text" style="'+this.primaryButtonStyles+'">'+this.primaryButtonText+"</div>":"",e+=this.secondaryButtonText?'<div id="repro-message--banner--secondary-button-text" style="'+this.secondaryButtonStyles+'">'+this.secondaryButtonText+"</div>":"",e+='</div><div id="repro-message--banner--close-button"><div id="repro-message--banner-close-icon"><div id="repro-message--banner-mdiv" style="'+this.closeButtonStyles+'"><div id="repro-message--banner-md" style="'+this.closeButtonStyles+'"></div></div></div></div></div></div>'}},{key:"bannerStyle",get:function(){var e="";return e+=this.bannerColor?"background-color:"+g(this.bannerColor)+";":""}},{key:"containerCssSelector",get:function(){return"#repro-message--banner--container"}},{key:"closeButtonCssSelector",get:function(){return"#repro-message--banner--close-button"}},{key:"primaryButtonCssSelector",get:function(){return"#repro-message--banner--primary-button-text"}},{key:"secondaryButtonCssSelector",get:function(){return"#repro-message--banner--secondary-button-text"}}]),t}(),N=function(){function e(t){i(this,e),this.messages=[],this.tracker=t,this.hasVisibleMessage=!1,this.generateStyleElement()}return a(e,[{key:"generateStyleElement",value:function(){document.addEventListener("DOMContentLoaded",function(){var e=document.createElement("style");e.innerHTML="#repro-message--dialog--overlay-wrapper{background:rgba(0,0,0,0.8);position:fixed;width:100%;height:100%;left:0;top:0;z-index:1000;display:flex;align-items:center;justify-content:center;}#repro-message--dialog--closer{height:100%;left:0;position:fixed;top:0;width:100%;z-index:100;}#repro-message--dialog--container{background:white;display:inline-flex;margin-top:24px;max-width:700px;z-index:101;min-height:200px;padding:0;position:relative;border:0;box-shadow:03px12pxrgba(27,31,35,0.15);overflow:hidden;}#repro-message--dialog--content{display:flex;align-items:center;}#repro-message--dialog--image-container{display:flex;min-width:266px;overflow:hidden;background-size:cover;background-position:center;}#repro-message--dialog--text{padding:24px;overflow:hidden;}#repro-message--dialog--header{color:black;font-family:inherit;font-size:1em;line-height:1.2;font-weight:bold;overflow:hidden;}#repro-message--dialog--body{color:rgba(0,0,0,0.8);line-height:1.2;margin-top:8px;font-family:inherit;font-size:0.9em;overflow:hidden;}#repro-message--dialog--button-container{display:inline-flex;align-items:flex-start;flex-wrap:wrap;}#repro-message--dialog--primary-button-text,#repro-message--dialog--secondary-button-text{border:1pxsolid#000;box-sizing:border-box;border-radius:6px;margin-top:12px;max-width:385px;overflow:hidden;padding:8px14px;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;text-align:center;user-select:none;}#repro-message--dialog--primary-button-text{background:black;color:white;margin-right:8px;}#repro-message--dialog--secondary-button-text{color:white;background:black;}#repro-message--dialog--close-button{cursor:pointer;position:absolute;right:0;padding-top:8px;padding-right:12px;}#repro-message--dialog-close-icon{width:14px;height:14px;background-color:transparent;}#repro-message--dialog-mdiv,#repro-message--dialog-md{height:14px;width:2px;background:black;}#repro-message--dialog-mdiv{margin-left:12px;transform:rotate(45deg);-ms-transform:rotate(45deg);/*IE9*/-webkit-transform:rotate(45deg);/*SafariandChrome*/Z-index:1;}#repro-message--dialog-md{transform:rotate(90deg);-ms-transform:rotate(90deg);/*IE9*/-webkit-transform:rotate(90deg);/*SafariandChrome*/Z-index:2;}@mediaonlyscreenand(max-width:748px){#repro-message--dialog--container{margin-top:0;max-width:90%;flex-direction:column;}#repro-message--dialog--header{max-height:75px;}#repro-message--dialog--body{max-height:52px;}#repro-message--dialog--image-container{min-height:246px;}#repro-message--dialog--button-container{display:flex;flex-direction:column;}#repro-message--dialog--primary-button-text,#repro-message--dialog--secondary-button-text{max-width:none;width:100%;}#repro-message--dialog--primary-button-text{margin-bottom:8px;}}#repro-message--dialog-mini--container{background:white;display:inline-flex;flex-direction:column;width:325px;z-index:1000;padding:0;margin:0;border:0;box-shadow:03px12pxrgba(27,31,35,0.15);position:fixed;}#repro-message--dialog-mini--container.left-top{left:24px;top:24px;}#repro-message--dialog-mini--container.left-bottom{left:24px;bottom:24px;}#repro-message--dialog-mini--container.right-top{right:24px;top:24px;left:auto;}#repro-message--dialog-mini--container.right-bottom{right:24px;bottom:24px;left:auto;}#repro-message--dialog-mini--content{display:flex;align-items:center;flex-direction:column;padding:12px;position:relative;}#repro-message--dialog-mini--upper{display:inline-flex;width:100%;}#repro-message--dialog-mini--image-container{display:flex;margin-right:12px;text-align:center;}#repro-message--dialog-mini--image{width:72px;height:auto;align-self:center;}#repro-message--dialog-mini--text{overflow:hidden;}#repro-message--dialog-mini--header{color:black;font-family:inherit;font-size:1em;line-height:1.2;font-weight:bold;margin-bottom:8px;max-height:96px;overflow:hidden;}#repro-message--dialog-mini--body{color:rgba(0,0,0,0.8);line-height:1.2;font-family:inherit;font-size:1em;max-height:76px;}#repro-message--dialog-mini--button-container{display:flex;flex-direction:column;align-items:flex-start;padding-top:12px;width:100%;}#repro-message--dialog-mini--primary-button-text,#repro-message--dialog-mini--secondary-button-text{border:1pxsolid#000;box-sizing:border-box;border-radius:6px;padding:8px14px;white-space:nowrap;cursor:pointer;text-align:center;user-select:none;width:100%;color:white;overflow:hidden;text-overflow:ellipsis;}#repro-message--dialog-mini--primary-button-text{background:black;margin-right:8px;margin-bottom:8px;}#repro-message--dialog-mini--secondary-button-text{background:black;}#repro-message--dialog-mini--close-button{cursor:pointer;position:absolute;right:0;top:0;padding-top:8px;padding-right:12px;}#repro-message--dialog-mini-close-icon{width:14px;height:14px;background-color:transparent;}#repro-message--dialog-mini-mdiv,#repro-message--dialog-mini-md{height:14px;width:2px;background:black;}#repro-message--dialog-mini-mdiv{margin-left:12px;transform:rotate(45deg);-ms-transform:rotate(45deg);-webkit-transform:rotate(45deg);z-index:1;}#repro-message--dialog-mini-md{transform:rotate(90deg);-ms-transform:rotate(90deg);-webkit-transform:rotate(90deg);z-index:2;}@mediaonlyscreenand(max-width:748px){#repro-message--dialog-mini--container{left:0!important;bottom:0!important;top:auto!important;right:auto!important;width:100%;}#repro-message--dialog-mini--text{padding-top:12px;}}#repro-message--dialog-image-only--container{background:white;cursor:pointer;display:inline-flex;margin-top:24px;max-width:90%;z-index:1000;padding:0;border:0;box-shadow:03px12pxrgba(27,31,35,0.15);position:relative;}#repro-message--dialog-image-only--image{align-self:center;max-width:100%;}#repro-message--dialog-image-only--close-button{position:absolute;right:0;padding-top:8px;padding-right:12px;}#repro-message--dialog-image-only-close-icon{width:14px;height:14px;background-color:transparent;}#repro-message--dialog-mdiv,#repro-message--dialog-image-only-md{height:14px;width:2px;background:black;}#repro-message--dialog-image-only-mdiv{margin-left:12px;transform:rotate(45deg);-ms-transform:rotate(45deg);-webkit-transform:rotate(45deg);z-index:1;}#repro-message--dialog-image-only-md{transform:rotate(90deg);-ms-transform:rotate(90deg);-webkit-transform:rotate(90deg);z-index:2;}#repro-message--banner--container{background:rgba(0,0,0,0.8);position:fixed;bottom:0;left:0;max-height:300px;min-height:84px;min-width:320px;padding-top:12px;width:100%;z-index:1000;}#repro-message--banner--content{display:flex;margin-right:auto;margin-left:auto;width:960px;}#repro-message--banner--upper{display:flex;}#repro-message--banner--image-container{display:flex;width:auto;}#repro-message--banner--image-containerimg{align-self:center;max-width:300px;height:auto;max-height:300px;height:72px;width:72px;}#repro-message--banner--text{padding:12px24px;width:100%;max-height:252px;overflow:hidden;}#repro-message--banner--header{color:white;font-family:inherit;font-size:1em;line-height:1.2;font-weight:bold;}#repro-message--banner--body{color:rgba(255,255,255,0.8);line-height:1.2;margin-top:8px;font-family:inherit;font-size:0.9em;}#repro-message--banner--button-container{display:inline-flex;align-items:flex-start;padding-top:24px;}#repro-message--banner--primary-button-text,#repro-message--banner--secondary-button-text{border:1pxsolid#000;box-sizing:border-box;border-radius:6px;max-width:230px;overflow:hidden;padding:9px16px;white-space:nowrap;cursor:pointer;text-align:center;text-overflow:ellipsis;user-select:none;}#repro-message--banner--primary-button-text{background:black;color:white;margin-right:8px;}#repro-message--banner--secondary-button-text{background:black;color:white;}#repro-message--banner--close-button{cursor:pointer;padding-top:8px;}#repro-message--banner-close-icon{width:24px;height:24px;background-color:transparent;}#repro-message--banner-mdiv,#repro-message--banner-md{height:18px;width:3px;background:white;}#repro-message--banner-mdiv{margin-left:12px;transform:rotate(45deg);-ms-transform:rotate(45deg);/*IE9*/-webkit-transform:rotate(45deg);/*SafariandChrome*/Z-index:1;}#repro-message--banner-md{transform:rotate(90deg);-ms-transform:rotate(90deg);/*IE9*/-webkit-transform:rotate(90deg);/*SafariandChrome*/Z-index:2;}@mediaonlyscreenand(max-width:960px){#repro-message--banner--content{max-width:100%;}#repro-message--banner--close-button{padding-right:8px;}#repro-message--banner--image-container{margin-left:24px;}display:flex;}@media(max-width:640px){#repro-message--banner--content{flex-direction:column;}#repro-message--banner--button-container{padding-top:8px;}#repro-message--banner--text{max-height:145px;padding-bottom:8px;padding-left:12px;}#repro-message--banner--button-container{display:flex;flex-direction:column;padding-left:12px;padding-right:12px;padding-bottom:12px;}#repro-message--banner--primary-button-text,#repro-message--banner--secondary-button-text{max-width:none;width:100%;}#repro-message--banner--secondary-button-text{margin-top:8px;}#repro-message--banner--close-button{position:absolute;right:0;top:0;}#repro-message--banner--image-container{margin-left:12px;}}",document.body.appendChild(e)})}},{key:"buildMessages",value:function(){var e=this;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t){var r=void 0;switch(s(t.panels[0],{trigger_event_name:"初回起動3"}),t.kind){case"banner":r=new I(t.panels[0],e,e.tracker);break;case"Marketing::WebMessageDialogPanel":r=new P(t.panels[0],e,e.tracker);break;case"Marketing::DialogMiniWebMessagePanel":r=new T(t.panels[0],e,e.tracker);break;case"Marketing::DialogImageOnlyWebMessagePanel":r=new O(t.panels[0],e,e.tracker);break;default:return void console.warn("Unrecognized type is given, aborting message generation.")}e.messages.push(r),e.tracker.subscribe(e,e.showTriggeredMessage),r.imageUrl&&r.preloadImage()})}},{key:"showTriggeredMessage",value:function(e){var t=this;if(!e||!e.name)return!1;if(this.hasVisibleMessage)return!1;var r=this.messages.find(function(r){return r.triggerEventName===e.name&&!t.shownMessages[r.messageId]});if(r){r.show(),this.hasVisibleMessage=!0,this.storeShownMessage(r,c(new Date,!0));var o=this.messages.indexOf(r);this.messages.splice(o,1),this.tracker.unsubscribe(this)}}},{key:"hideVisibleMessage",value:function(){var e=this.messages.find(function(e){return e.isVisible});e&&e.dismiss()}},{key:"storeShownMessage",value:function(e,t){var r=this.shownMessages;r[e.messageId]={id:e.messageId,tracked_at:t},p(h(this.tracker.config.token),JSON.stringify(r))}},{key:"shownMessages",get:function(){try{var e=u(h(this.tracker.config.token))||"{}";return JSON.parse(e)}catch(e){return{}}}}]),e}(),U=function(){function e(t){i(this,e),this.events=[],this.tracker=t,this.userProfiles={},this.messages=[]}return a(e,[{key:"addCustomEvent",value:function(e){this.events.push(e),this.customEventPayloadSize>=24576&&this.tracker.uploadClip()}},{key:"trackMessageDisplay",value:function(e,t){var r={id:e,clicked_button_id:t,tracked_at:c(new Date,!0)};this.messages.push(r)}},{key:"emptyEvents",value:function(){this.events=[]}},{key:"setUserProfile",value:function(e,t,r){this.userProfiles[t]={type:e,value:r},this.tracker.uploadClip()}},{key:"byteLength",value:function(e){for(var t=e.length,r=t-1;r>=0;r-=1){var o=e.charCodeAt(r);o>127&&o<=2047?t+=1:o>2047&&o<=65535&&(t+=2),o>=56320&&o<=57343&&(r-=1)}return t}},{key:"customEventPayloadSize",get:function(){return this.byteLength(JSON.stringify(this.events))}}]),e}(),A={token:"",bundle_id:"",idfa:"",idfv:"",user_annotation:"",push_token:"",ip_address:"",app_version:"",sdk_version:"",os:"",os_version:"",device:"",network:"",height:0,width:0,production:!1,push_enabled:!1,started_at:"",ended_at:""},j=function(){function e(){i(this,e),this.config={api_host:"",token:""},this.user_annotation="",this.idfv="",this.isFirstLaunch=!1;var t=new Date;this.started_at=c(t,!0),this.configuration=new E,this.subscribers=[],this.messageManager=new N(this),this.sessionManager=new f,this.clip=new U(this),this.isInitialized=!1}return a(e,[{key:"subscribe",value:function(e,t){this.subscribers.push({target:e,callback:t})}},{key:"unsubscribe",value:function(e){var t=this.subscribers.findIndex(function(t){return t.target===e});this.subscribers.splice(t,1)}},{key:"notifyEvent",value:function(e){this.subscribers.forEach(function(t){t.callback.call(t.target,e)})}},{key:"init",value:function(e){var t=this;this.config.api_host=e.api_host||"https://6gp3biaq8d.execute-api.ap-northeast-1.amazonaws.com/active/upload",this.config.token=e.token,this.isInitialized=!0,o.get("rpr_uid")||(this.isFirstLaunch=!0,this.track("pageFirstView"),o.set("rpr_uid",m())),this.idfv=o.get("rpr_uid"),this.configuration.call({user_annotation:this.user_annotation,idfv:this.idfv,isFirstLaunch:this.isFirstLaunch,token:this.config.token}).then(function(e){var r=new Date;e.trackable&&t.sessionManager.isNewSession(r)&&(t.trackNewSession(),t.sessionManager.updateLastEventTrackedAt(r)),e.shouldClearCustomEvents&&(t.custom_events=[]),e.messages.length>0&&t.messageManager.buildMessages(e.messages)}).catch(function(e){return console.warn(e)})}},{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.configuration.trackable||!this.validateEventName(e)||!this.validateEventProperties(t))return!1;var r=new Date;this.sessionManager.isNewSession(r)&&this.trackNewSession();var o={name:e,properties:t,tracked_at:c(r,!0)};this.notifyEvent(o),this.clip.addCustomEvent(o),this.sessionManager.updateLastEventTrackedAt(r)}},{key:"trackNewSession",value:function(){if(!this.configuration.trackable)return!1;var e=new Date;this.clip.addCustomEvent({name:"sessionStarted",properties:{},tracked_at:c(e,!0)}),this.sessionManager.updatecurrentSessionStartedAt(e)}},{key:"setUserId",value:function(e){this.user_annotation=e}},{key:"setStringUserProfile",value:function(e,t){if(!this.validateUserProfileKey(e)||!this.validateUserProfileValue(t))return!1;this.clip.setUserProfile("string",e,t)}},{key:"setIntUserProfile",value:function(e,t){if(!this.validateUserProfileKey(e)||!this.validateUserProfileValue(t))return!1;this.clip.setUserProfile("int",e,t)}},{key:"setDoubleUserProfile",value:function(e,t){if(!this.validateUserProfileKey(e)||!this.validateUserProfileValue(t))return!1;this.clip.setUserProfile("decimal",e,t)}},{key:"setDateUserProfile",value:function(e,t){if(!this.validateUserProfileKey(e)||!this.validateUserProfileValue(t))return!1;this.clip.setUserProfile("datetime",e,t)}},{key:"hideMessage",value:function(){this.messageManager.hideVisibleMessage()}},{key:"uploadClip",value:function(){if(!this.isInitialized)return console.warn("Tracker not initialized yet!"),!1;if(!this.configuration.configured)return console.warn("Configuration not done yet!"),!1;if(!this.configuration.trackable)return console.warn("Tracking is not permitted!"),!1;var e=this.config.token+"_"+this.idfv+"_"+c(new Date)+".json";if(this.ended_at=c(new Date,!0),"sendBeacon"in navigator)navigator.sendBeacon(this.config.api_host,JSON.stringify({filename:e,clip:this.clipJSON}));else{var t=new XMLHttpRequest;t.open("POST",this.config.api_host,!1),t.send(JSON.stringify({filename:e,clip:this.clipJSON}))}this.clip.emptyEvents(),this.started_at=c(new Date),this.ended_at=""}},{key:"validateEventName",value:function(e){return"string"!=typeof e?(console.error("Didn't track event: Event name must be string."),!1):e?e.length>191?(console.error("Didn't track event: Event name must be 191 characters or less; your current event name is \""+e+'".'),!1):!e.startsWith("___repro___")||(console.error("Didn't track event: Event name can't start with '___repro___'; your current event name is \""+e+'".'),!1):(console.error("Didn't track event: Event name can't be blank."),!1)}},{key:"validateEventProperties",value:function(e){if(null===e)return!0;for(var t=Object.keys(e),r=0;r<t.length;r+=1){var o=t[r];if(e.null||!o)return console.error("Didn't track event: Property name can't be blank."),!1;if(o.length>48)return console.error("Didn't track event: Property name must be 48 characters or less; your current property name is \""+o+'".'),!1}return!(t.length>20)||(console.error("Didn't track event: The number of properties must be less than 20; you currently have \""+Object.keys(e).length+'" set.'),!1)}},{key:"validateUserProfileKey",value:function(e){return"string"!=typeof e?(console.error('Validation failed for User Profile: key = "'+e+'": The key of User Profile must be string'),!1):e?e.startsWith("___repro___")?(console.error('Validation failed for User Profile: key = "'+e+'": The key of User Profile can\'t start with "___repro___"'),!1):!(e.length>255)||(console.error('Validation failed for User Profile: key = "'+e+'": The length of the key of User Profile must be lower than or equals to 255'),!1):(console.error('Validation failed for User Profile: key = "'+e+"\": The key of User Profile can't be empty"),!1)}},{key:"validateUserProfileValue",value:function(e){return e?!(e.length>255)||(console.error('Validation failed for User Profile: value = "'+e+'": The length of the value of User Profile must be lower than or equals to 255'),!1):(console.error('Validation failed for User Profile: value = "'+e+"\": The value of User Profile can't be null"),!1)}},{key:"clipJSON",get:function(){var e=s(A,{token:this.config.token,user_annotation:this.user_annotation,started_at:this.started_at,idfv:this.idfv,ip_address:this.configuration.ipAddress,ended_at:this.ended_at,height:window.innerHeight,width:window.innerWidth,bundle_id:location.host,device:navigator.platform,network:"connection"in navigator?navigator.connection.effectiveType:"unknown",sdk_version:"0.0.3",os:"web",os_version:n.os.family+" "+n.os.version,push_enabled:"permission"in Notification&&"granted"===Notification.permission});return s({},{custom_event:this.clip.events,user:this.clip.userProfiles,in_app_messages:this.clip.messages,clip:e})}}]),e}();window.reproio=new j,document.addEventListener("DOMContentLoaded",function(){window.reproio.track("pageView",{url:location.pathname});for(var e=document.links,t=0;t<e.length;t+=1){e[t].addEventListener("click",function(e){window.reproio.track("linkClick",{href:e.currentTarget.href})})}});var F=history.pushState;return history.pushState&&void 0!==history.state&&(history.pushState=function(){window.reproio.hideMessage(),F.apply(window.history,arguments)}),window.addEventListener("beforeunload",function(){window.reproio.uploadClip()}),j}();
//# sourceMappingURL=repro-sdk.min.js.map
